var h=!1,i=null,n=!1,c=!1,f=new Set;function l(e,t){f.forEach(r=>r(e,t))}var b=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function g(e){return!(e.metaKey||!b&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function E(e){n=!0,g(e)&&(i="keyboard",l("keyboard",e))}function o(e){if(i="pointer",e.type==="mousedown"||e.type==="pointerdown"){n=!0;const t=e.composedPath?e.composedPath()[0]:e.target;let r=!1;try{r=t.matches(":focus-visible")}catch{}if(r)return;l("pointer",e)}}function L(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}function k(e){L(e)&&(n=!0,i="virtual")}function S(e){e.target===window||e.target===document||(!n&&!c&&(i="virtual",l("virtual",e)),n=!1,c=!1)}function z(){n=!1,c=!0}function m(){return i!=="pointer"}function x(){if(typeof window>"u"||h)return;const{focus:e}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...r){n=!0,e.apply(this,r)},document.addEventListener("keydown",E,!0),document.addEventListener("keyup",E,!0),document.addEventListener("click",k,!0),window.addEventListener("focus",S,!0),window.addEventListener("blur",z,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",o,!0),document.addEventListener("pointermove",o,!0),document.addEventListener("pointerup",o,!0)):(document.addEventListener("mousedown",o,!0),document.addEventListener("mousemove",o,!0),document.addEventListener("mouseup",o,!0)),h=!0}function B(e){x(),e(m());const t=()=>e(m());return f.add(t),()=>{f.delete(t)}}function F(e,t){var p;if(!e){t(void 0);return}t({width:e.offsetWidth,height:e.offsetHeight});const r=(p=e.ownerDocument.defaultView)!=null?p:window,w=new r.ResizeObserver(u=>{if(!Array.isArray(u)||!u.length)return;const[y]=u;let d,s;if("borderBoxSize"in y){const a=y.borderBoxSize,v=Array.isArray(a)?a[0]:a;d=v.inlineSize,s=v.blockSize}else d=e.offsetWidth,s=e.offsetHeight;t({width:d,height:s})});return w.observe(e,{box:"border-box"}),()=>w.unobserve(e)}export{F as a,B as t};
